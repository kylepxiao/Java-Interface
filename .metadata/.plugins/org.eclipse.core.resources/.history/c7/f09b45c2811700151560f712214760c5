package main.util;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import main.GUI_Instance;
import main.block.DraggableRect;

public class Save {
	
	public static void save(GUI_Instance f){
		try{
			// initiates savefile and ObjectOutputStream
			FileOutputStream saveFile = new FileOutputStream("save.sav");
			ObjectOutputStream save = new ObjectOutputStream(saveFile);
			
			// saves rect ArrayList in controller object
			save.writeObject(f.controller.getRects());
			System.out.println("saved");
			
			// closes ObjectOutputStream
			save.close();
		}
		catch(Exception exc){
			exc.printStackTrace();
		}
	}
	
	public static void load(GUI_Instance f){
		try{
			// initiates/loads savefile and ObjectInputStream
			FileInputStream saveFile = new FileInputStream("save.sav");
			ObjectInputStream save = new ObjectInputStream(saveFile);
			
			// intiates temporary controller c
			main.util.Controller c = (main.util.Controller) save.readObject();
			// loads each rectangle from rect ArrayList
			f.controller.clearRects();
			for(DraggableRect r : c.getRects()){
				this.add(r);
			}
			System.out.println("loaded");
			
			// closes ObjectInputStream
			save.close();
		}
		catch(Exception exc){
			exc.printStackTrace();
		}
	}
}
